<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="æ‚¨çš„ç§äººé…æ–¹åº“ - æœ¬åœ°å­˜å‚¨çš„é…æ–¹ç®¡ç†ç³»ç»Ÿ">
    <title>æ‚¨çš„ç§äººé…æ–¹åº“ - ä¸ªæ€§åŒ–èŠ³ç–—æ–¹æ¡ˆ</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .recipe-db-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-lg);
        }
        
        /* Header Section */
        .db-header {
            background: var(--card-bg);
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        
        .db-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-gradient);
        }
        
        .db-header h1 {
            margin-bottom: var(--spacing-sm);
            border: none;
            padding: 0;
        }
        
        .db-header .subtitle {
            color: var(--secondary-color);
            font-size: var(--text-sm);
            margin-bottom: var(--spacing-lg);
            line-height: 1.6;
        }
        
        .db-toolbar {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            margin-top: var(--spacing-lg);
        }
        
        /* Inventory Section */
        .inventory-section {
            background: var(--card-bg);
            padding: var(--spacing-md);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        
        .inventory-header {
            margin-bottom: var(--spacing-md);
        }
        
        .inventory-header h2 {
            margin-top: 0;
            margin-bottom: var(--spacing-xs);
            font-size: var(--text-lg);
            color: var(--primary-color);
        }
        
        .inventory-description {
            font-size: var(--text-xs);
            color: var(--secondary-color);
            margin: 0;
            line-height: 1.4;
        }
        
        .inventory-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }
        
        .inventory-card {
            padding: var(--spacing-sm);
            background: var(--bg-color);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color-light);
        }
        
        .inventory-card-header {
            margin-bottom: var(--spacing-xs);
        }
        
        .inventory-card-header h3 {
            margin: 0;
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .popular-items-compact {
            margin-bottom: var(--spacing-xs);
        }
        
        .popular-items-label {
            font-size: 10px;
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 4px;
        }
        
        .popular-items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 4px;
        }
        
        .popular-item-btn {
            padding: 4px 6px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-size: 11px;
            font-weight: 500;
            color: var(--primary-color);
            text-align: center;
            user-select: none;
        }
        
        .popular-item-btn:hover {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        
        .popular-item-btn.added {
            background: var(--success-bg);
            color: var(--success-text);
            border-color: var(--success-color);
        }
        
        .custom-add-compact {
            margin-top: var(--spacing-xs);
        }
        
        .oil-select-compact {
            width: 100%;
            padding: 4px 6px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 11px;
            transition: var(--transition);
            background: var(--card-bg);
            color: var(--primary-color);
            margin-bottom: 4px;
        }
        
        .oil-select-compact:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }
        
        .custom-input-group-compact {
            display: flex;
            gap: 4px;
        }
        
        .custom-input-compact {
            flex: 1;
            padding: 4px 6px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 11px;
            transition: var(--transition);
        }
        
        .custom-input-compact:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }
        
        .inventory-table-section {
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-color);
        }
        
        .inventory-table-section h3 {
            margin: 0 0 var(--spacing-xs) 0;
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .inventory-table-wrapper {
            overflow-x: auto;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color-light);
            -webkit-overflow-scrolling: touch;
        }
        
        .inventory-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            font-size: var(--text-xs);
        }
        
        .inventory-table th {
            padding: 6px 12px;
            text-align: left;
            font-weight: 600;
            background: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            font-size: 11px;
            white-space: nowrap;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .inventory-table td {
            padding: 6px 12px;
            border-bottom: 1px solid var(--border-color-light);
            vertical-align: top;
        }
        
        @media (max-width: 768px) {
            .inventory-table {
                min-width: 800px;
            }
            
            .inventory-table th,
            .inventory-table td {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .inventory-production-date-input {
                width: 90px;
                font-size: 9px;
            }
        }
        
        .inventory-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        .inventory-table tbody tr:hover {
            background: var(--bg-color);
        }
        
        .inventory-oil-link {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }
        
        .inventory-oil-link:hover {
            text-decoration: underline;
            color: var(--accent-gradient-hover);
        }
        
        .inventory-type-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }
        
        .inventory-type-tag {
            display: inline-block;
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .inventory-production-date {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .inventory-production-date-input {
            padding: 2px 4px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 10px;
            width: 100px;
        }
        
        .inventory-production-date-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }
        
        .inventory-shelf-life {
            font-size: 10px;
            color: var(--secondary-color);
        }
        
        .inventory-category-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 600;
        }
        
        .inventory-category-badge.oils {
            background: var(--info-bg);
            color: var(--info-text);
        }
        
        .inventory-category-badge.carriers {
            background: var(--warning-bg);
            color: var(--warning-text);
        }
        
        .inventory-category-badge.solvents {
            background: var(--success-bg);
            color: var(--success-text);
        }
        
        .chip {
            display: inline-flex;
            align-items: center;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            color: var(--primary-color);
        }
        
        .chip:hover {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        
        .chip .remove-chip {
            margin-left: var(--spacing-xs);
            opacity: 0.7;
            font-weight: 700;
        }
        
        .chip:hover .remove-chip {
            opacity: 1;
        }
        
        details {
            margin-top: var(--spacing-lg);
        }
        
        details summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--accent-color);
            padding: var(--spacing-md);
            background: var(--bg-color);
            border-radius: var(--radius-md);
            transition: var(--transition);
            list-style: none;
        }
        
        details summary::-webkit-details-marker {
            display: none;
        }
        
        details summary:hover {
            background: var(--bg-secondary);
        }
        
        details[open] summary {
            margin-bottom: var(--spacing-lg);
        }
        
        .inventory-form-grid {
            margin-top: var(--spacing-lg);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
        }
        
        .inventory-form-item {
            display: flex;
            flex-direction: column;
        }
        
        .inventory-form-item label {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: var(--spacing-sm);
            font-size: var(--text-sm);
        }
        
        .inventory-form-item .input-group {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .inventory-form-item input {
            flex: 1;
            padding: var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--text-base);
            transition: var(--transition);
        }
        
        .inventory-form-item input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Recipe Editor */
        .recipe-editor {
            background: var(--card-bg);
            padding: 0;
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            animation: fadeIn 0.3s ease-out;
            overflow: hidden;
        }
        
        .recipe-editor-header {
            background: var(--accent-gradient);
            padding: var(--spacing-xl);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .recipe-editor-header::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }
        
        .recipe-editor h2 {
            margin: 0;
            font-size: var(--text-2xl);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            position: relative;
            z-index: 1;
        }
        
        .recipe-editor-subtitle {
            margin-top: var(--spacing-sm);
            font-size: var(--text-sm);
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .recipe-editor-body {
            padding: var(--spacing-xl);
        }
        
        .form-section {
            margin-bottom: var(--spacing-2xl);
        }
        
        .form-section:last-child {
            margin-bottom: 0;
        }
        
        .form-section-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 2px solid var(--border-color-light);
        }
        
        .form-section-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-gradient);
            color: white;
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: 600;
        }
        
        .form-section-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--primary-color);
            margin: 0;
        }
        
        .form-section-description {
            font-size: var(--text-xs);
            color: var(--secondary-color);
            margin-top: var(--spacing-xs);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: var(--spacing-sm);
            font-size: var(--text-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        
        .form-group label .required {
            color: var(--error-color);
            font-size: var(--text-xs);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--text-base);
            transition: var(--transition);
            background: var(--card-bg);
            color: var(--primary-color);
            font-family: inherit;
        }
        
        .form-group input:hover,
        .form-group select:hover,
        .form-group textarea:hover {
            border-color: var(--border-color-dark);
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
            line-height: 1.6;
        }
        
        .form-group .input-hint {
            font-size: var(--text-xs);
            color: var(--secondary-color);
            margin-top: var(--spacing-xs);
            line-height: 1.4;
        }
        
        .oil-rows-container {
            margin-bottom: var(--spacing-lg);
        }
        
        .oil-rows-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }
        
        .oil-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1.5fr auto;
            gap: var(--spacing-md);
            align-items: end;
            padding: var(--spacing-md);
            background: var(--bg-color);
            border: 2px solid var(--border-color-light);
            border-radius: var(--radius-md);
            transition: var(--transition);
            position: relative;
        }
        
        .oil-row:hover {
            border-color: var(--accent-color);
            box-shadow: var(--shadow-sm);
            transform: translateY(-2px);
        }
        
        .oil-row-number {
            position: absolute;
            top: -8px;
            left: var(--spacing-md);
            background: var(--accent-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-xs);
            font-weight: 600;
            box-shadow: var(--shadow-sm);
        }
        
        .oil-row select,
        .oil-row input {
            padding: var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--text-base);
            transition: var(--transition);
            background: var(--card-bg);
            width: 100%;
        }
        
        .oil-row select:focus,
        .oil-row input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .oil-row .remove-oil-btn {
            padding: var(--spacing-md);
            min-width: 48px;
            height: 48px;
            background: var(--error-color);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-lg);
        }
        
        .oil-row .remove-oil-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
            box-shadow: var(--shadow-sm);
        }
        
        .oil-row .remove-oil-btn:active {
            transform: scale(0.95);
        }
        
        .add-oil-btn {
            width: 100%;
            padding: var(--spacing-md);
            background: var(--bg-color);
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-md);
            color: var(--accent-color);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            font-size: var(--text-base);
        }
        
        .add-oil-btn:hover {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        
        .safety-panel {
            padding: var(--spacing-lg);
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-lg);
            border: 2px solid var(--border-color-light);
            position: relative;
            overflow: hidden;
        }
        
        .safety-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-gradient);
        }
        
        .safety-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-md);
            gap: var(--spacing-md);
        }
        
        .safety-panel-label {
            font-size: var(--text-xs);
            color: var(--secondary-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }
        
        .safety-panel-content {
            font-size: var(--text-sm);
            color: var(--primary-color);
            line-height: 1.8;
            white-space: pre-line;
            background: var(--card-bg);
            padding: var(--spacing-md);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color-light);
        }
        
        .safety-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-xs);
        }
        
        .safety-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
        }
        
        .safety-green {
            background: var(--success-bg);
            color: var(--success-text);
        }
        
        .safety-yellow {
            background: var(--warning-bg);
            color: var(--warning-text);
        }
        
        .safety-red {
            background: var(--error-bg);
            color: var(--error-text);
        }
        
        .form-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: flex-end;
            margin-top: var(--spacing-xl);
            padding-top: var(--spacing-xl);
            border-top: 2px solid var(--border-color-light);
        }
        
        .form-actions .btn {
            min-width: 120px;
        }
        
        @media (max-width: 768px) {
            .recipe-editor-header {
                padding: var(--spacing-lg);
            }
            
            .recipe-editor-body {
                padding: var(--spacing-lg);
            }
            
            .form-section {
                margin-bottom: var(--spacing-xl);
            }
            
            .form-section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-sm);
            }
            
            .oil-row {
                grid-template-columns: 1fr;
                gap: var(--spacing-sm);
                padding: var(--spacing-sm);
            }
            
            .oil-row-number {
                position: static;
                margin-bottom: var(--spacing-xs);
                align-self: flex-start;
            }
            
            .oil-row .remove-oil-btn {
                width: 100%;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .form-actions .btn {
                width: 100%;
            }
            
            .safety-panel-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .safety-panel-header > div:last-child {
                align-self: flex-end;
            }
        }
        
        /* Recipe List */
        .recipe-list {
            background: var(--card-bg);
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        
        .recipe-list-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-lg);
            gap: var(--spacing-lg);
            flex-wrap: wrap;
        }
        
        .recipe-list-header h2 {
            margin-top: 0;
            margin-bottom: var(--spacing-xs);
            font-size: var(--text-xl);
            color: var(--primary-color);
        }
        
        .recipe-list-subtitle {
            font-size: var(--text-sm);
            color: var(--secondary-color);
            margin: 0;
            line-height: 1.6;
        }
        
        .recipe-list-actions {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            align-items: center;
        }
        
        .view-toggle {
            display: flex;
            gap: var(--spacing-xs);
            background: var(--bg-color);
            padding: 4px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }
        
        .view-toggle-btn {
            padding: var(--spacing-xs) var(--spacing-md);
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: var(--text-sm);
            color: var(--secondary-color);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        
        .view-toggle-btn:hover {
            background: var(--bg-secondary);
            color: var(--primary-color);
        }
        
        .view-toggle-btn.active {
            background: var(--accent-color);
            color: white;
        }
        
        .recipe-count {
            font-size: var(--text-sm);
            color: var(--secondary-color);
            margin-left: var(--spacing-md);
        }
        
        .recipe-count strong {
            color: var(--accent-color);
            font-size: var(--text-base);
        }
        
        .search-filter-container {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }
        
        .search-input {
            width: 100%;
            padding: var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--text-base);
            transition: var(--transition);
            background: var(--card-bg);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .filter-container {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
        }
        
        .filter-container label {
            font-weight: 600;
            color: var(--primary-color);
            font-size: var(--text-sm);
            white-space: nowrap;
        }
        
        .filter-container select {
            padding: var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--text-base);
            transition: var(--transition);
            background: var(--card-bg);
            min-width: 200px;
        }
        
        .filter-container select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .recipe-table-wrapper {
            overflow-x: auto;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }
        
        .recipe-table {
            width: 100%;
            border-collapse: collapse;
            margin: 0;
            background: var(--card-bg);
            table-layout: fixed; /* å›ºå®šè¡¨æ ¼å¸ƒå±€ */
        }
        
        .recipe-table thead {
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--bg-secondary) 100%);
        }
        
        .recipe-table th {
            padding: var(--spacing-md) var(--spacing-lg);
            text-align: left;
            font-weight: 600;
            font-size: var(--text-sm);
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--border-color);
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--bg-secondary) 100%);
            z-index: 10;
        }
        
        /* å›ºå®šå„åˆ—å®½åº¦æ¯”ä¾‹ */
        .recipe-table th:nth-child(1),
        .recipe-table td:nth-child(1) {
            width: 18%; /* åç§°ï¼ˆåŒ…å«æ—¥æœŸå’Œä»‹è´¨ç±»å‹ï¼‰ */
        }
        
        .recipe-table th:nth-child(2),
        .recipe-table td:nth-child(2) {
            width: 10%; /* æˆåˆ†ï¼ˆç²¾æ²¹åˆ—è¡¨ï¼Œå¯èƒ½å¤šè¡Œï¼‰ */
        }
        
        .recipe-table th:nth-child(3),
        .recipe-table td:nth-child(3) {
            width: 7%; /* æµ“åº¦ï¼ˆæ•°å­—+%ï¼Œå¯èƒ½åŒ…å«è­¦å‘Šï¼‰ */
        }
        
        .recipe-table th:nth-child(4),
        .recipe-table td:nth-child(4) {
            width: 7%; /* å®¹é‡ï¼ˆé…æ–¹æ€»é‡ï¼‰ */
        }
        
        .recipe-table th:nth-child(5),
        .recipe-table td:nth-child(5) {
            width: 10%; /* åŸºç¡€æ²¹/æº¶å‰‚ */
        }
        
        .recipe-table th:nth-child(6),
        .recipe-table td:nth-child(6) {
            width: 22%; /* ç”¨é€”/å¤‡æ³¨ï¼ˆå¯èƒ½è¾ƒé•¿ï¼‰ */
        }
        
        .recipe-table th:nth-child(7),
        .recipe-table td:nth-child(7) {
            width: 12%; /* å®‰å…¨ï¼ˆæ ‡ç­¾ï¼‰ */
        }
        
        .recipe-table th:nth-child(8),
        .recipe-table td:nth-child(8) {
            width: 14%; /* æ“ä½œï¼ˆ3ä¸ªæŒ‰é’®ï¼‰ */
        }
        
        .recipe-table td {
            padding: var(--spacing-lg);
            text-align: left;
            border-bottom: 1px solid var(--border-color-light);
            font-size: var(--text-sm);
            color: var(--primary-color);
            vertical-align: top;
        }
        
        .recipe-table tbody tr {
            transition: var(--transition);
        }
        
        .recipe-table tbody tr:hover {
            background: var(--bg-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .recipe-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        .recipe-table tbody tr.has-inventory {
            background: rgba(16, 185, 129, 0.03);
            border-left: 3px solid var(--success-color);
        }
        
        .recipe-table tbody tr.unsafe-concentration {
            background: rgba(239, 68, 68, 0.03);
        }
        
        .recipe-table tbody tr.unsafe-concentration td {
            border-left: 3px solid var(--error-color);
        }
        
        .recipe-table tbody tr.has-inventory td:first-child::before {
            content: 'âœ“';
            color: var(--success-color);
            margin-right: var(--spacing-xs);
            font-weight: 600;
            font-size: var(--text-base);
        }
        
        /* å¡ç‰‡è§†å›¾æ ·å¼ */
        .recipe-cards-view {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }
        
        .recipe-cards-view.active {
            display: grid;
        }
        
        .recipe-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .recipe-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-gradient);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .recipe-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            border-color: var(--accent-color);
        }
        
        .recipe-card:hover::before {
            transform: scaleX(1);
        }
        
        .recipe-card.has-inventory {
            border-left: 4px solid var(--success-color);
        }
        
        .recipe-card.unsafe-concentration {
            border-left: 4px solid var(--error-color);
        }
        
        .recipe-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-md);
            gap: var(--spacing-md);
        }
        
        .recipe-card-title {
            flex: 1;
        }
        
        .recipe-card-name {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: var(--spacing-xs);
            line-height: 1.3;
        }
        
        .recipe-card-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            font-size: var(--text-xs);
            color: var(--secondary-color);
        }
        
        .recipe-card-meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .recipe-card-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            font-weight: 600;
            white-space: nowrap;
        }
        
        .recipe-card-content {
            margin-bottom: var(--spacing-md);
        }
        
        .recipe-card-section {
            margin-bottom: var(--spacing-md);
        }
        
        .recipe-card-section:last-child {
            margin-bottom: 0;
        }
        
        .recipe-card-label {
            font-size: var(--text-xs);
            font-weight: 600;
            color: var(--secondary-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--spacing-xs);
        }
        
        .recipe-card-value {
            font-size: var(--text-sm);
            color: var(--primary-color);
            line-height: 1.6;
        }
        
        .recipe-card-oils {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .recipe-card-oil-tag {
            display: inline-block;
            padding: 4px 10px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 500;
            color: var(--accent-color);
        }
        
        .recipe-card-actions {
            display: flex;
            gap: var(--spacing-sm);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-color-light);
            margin-top: var(--spacing-md);
        }
        
        .recipe-card-actions .btn {
            flex: 1;
            font-size: var(--text-xs);
            padding: var(--spacing-sm) var(--spacing-md);
        }
        
        .recipe-table-wrapper.hidden {
            display: none;
        }
        
        /* å¯ç¼–è¾‘åç§°æ ·å¼ */
        .recipe-name-editable {
            cursor: pointer;
            position: relative;
            padding: 2px 4px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }
        
        .recipe-name-editable:hover {
            background: var(--bg-color);
            padding: 2px 4px;
        }
        
        .recipe-name-editable:hover::after {
            content: 'åŒå‡»ç¼–è¾‘';
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 4px;
            padding: 4px 8px;
            background: var(--primary-color);
            color: white;
            font-size: 11px;
            border-radius: var(--radius-sm);
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            animation: fadeInTooltip 0.2s ease-out 0.3s forwards;
            pointer-events: none;
        }
        
        .recipe-name-editable.editing {
            background: transparent;
            padding: 0;
        }
        
        .recipe-name-editable.editing::after {
            display: none;
        }
        
        .recipe-name-input {
            width: 100%;
            padding: 4px 8px;
            border: 2px solid var(--accent-color);
            border-radius: var(--radius-sm);
            font-size: inherit;
            font-weight: 600;
            font-family: inherit;
            background: var(--card-bg);
            color: var(--primary-color);
            outline: none;
            min-width: 150px;
        }
        
        .recipe-name-input:focus {
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .recipe-card-name {
            cursor: pointer;
            padding: 2px 4px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            display: inline-block;
            position: relative;
        }
        
        .recipe-card-name:hover {
            background: var(--bg-color);
        }
        
        .recipe-card-name:hover::after {
            content: 'åŒå‡»ç¼–è¾‘';
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 4px;
            padding: 4px 8px;
            background: var(--primary-color);
            color: white;
            font-size: 11px;
            border-radius: var(--radius-sm);
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            animation: fadeInTooltip 0.2s ease-out 0.3s forwards;
            pointer-events: none;
        }
        
        .recipe-card-name.editing {
            background: transparent;
            padding: 0;
        }
        
        .recipe-card-name.editing::after {
            display: none;
        }
        
        @keyframes fadeInTooltip {
            from {
                opacity: 0;
                transform: translateY(-4px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .unsafe-badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 6px;
            background: var(--error-bg);
            color: var(--error-text);
            border-radius: var(--radius-sm);
            font-size: var(--text-xs);
            font-weight: 600;
            margin-left: var(--spacing-xs);
        }
        
        /* æ¶ˆæ¯åŠ¨ç”» */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .action-buttons {
            display: flex;
            gap: var(--spacing-xs);
        }
        
        .action-btn {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: var(--text-xs);
            font-weight: 600;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        
        .action-btn-edit {
            background: var(--info-bg);
            color: var(--info-text);
        }
        
        .action-btn-edit:hover {
            background: var(--info-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .action-btn-delete {
            background: var(--error-bg);
            color: var(--error-text);
        }
        
        .action-btn-delete:hover {
            background: var(--error-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .empty-state {
            text-align: center;
            padding: var(--spacing-3xl);
            color: var(--secondary-color);
        }
        
        .empty-state-icon {
            font-size: 64px;
            margin-bottom: var(--spacing-md);
            opacity: 0.5;
        }
        
        .empty-state-text {
            font-size: var(--text-lg);
            margin-bottom: var(--spacing-sm);
        }
        
        .empty-state-hint {
            font-size: var(--text-sm);
            color: var(--secondary-color);
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .recipe-db-container {
                padding: var(--spacing-lg) var(--spacing-md);
            }
            
            .inventory-header,
            .recipe-list-header {
                flex-direction: column;
            }
            
            .recipe-list-actions {
                width: 100%;
            }
            
            .recipe-list-actions .btn {
                flex: 1;
            }
            
            .form-grid,
            .inventory-form-grid {
                grid-template-columns: 1fr;
            }
            
            .search-filter-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .recipe-db-container {
                padding: var(--spacing-md);
            }
            
            .db-header,
            .inventory-section,
            .recipe-editor,
            .recipe-list {
                padding: var(--spacing-lg);
            }
            
            .recipe-table-wrapper {
                overflow-x: scroll;
            }
            
            .recipe-table {
                min-width: 800px;
            }
            
            .recipe-cards-view {
                grid-template-columns: 1fr;
            }
            
            .recipe-list-actions {
                flex-direction: column;
            }
            
            .recipe-list-actions > * {
                width: 100%;
            }
            
            .view-toggle {
                width: 100%;
                justify-content: stretch;
            }
            
            .view-toggle-btn {
                flex: 1;
            }
            
            .db-toolbar {
                flex-direction: column;
            }
            
            .db-toolbar .btn {
                width: 100%;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .form-actions .btn {
                width: 100%;
            }
        }
        
        /* Stats Cards Styles */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--secondary-color);
        }
        
        @media print {
            .db-toolbar,
            .recipe-editor {
                display: none;
            }
            
            .recipe-table {
                font-size: var(--text-xs);
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">è·³è½¬åˆ°ä¸»è¦å†…å®¹</a>
    
    <div class="fixed-nav" id="fixedNav" role="navigation" aria-label="ä¸»å¯¼èˆª">
        <div class="nav-content">
            <div class="logo"><a href="index.html" aria-label="è¿”å›é¦–é¡µ">ä¸ªæ€§åŒ–èŠ³ç–—æ–¹æ¡ˆ</a></div>
            <button class="menu-toggle" id="menuToggle" aria-label="åˆ‡æ¢èœå•" aria-expanded="false" aria-controls="navMenu">â˜°</button>
            <nav id="navMenu" role="navigation">
                <a href="index.html">é¦–é¡µ</a>
                <a href="essential-oils.html">å¸¸ç”¨ç²¾æ²¹ä»‹ç»</a>
                <a href="formula-library.html">ç»å…¸é…æ–¹åº“</a>
                <a href="formula-builder.html">é…æ–¹å®éªŒ</a>
                <a href="making.html">åˆ¶ä½œæŒ‡å—</a>
                <a href="health-profile.html">æ‚¨çš„ä¿¡æ¯æ¡£æ¡ˆ</a>
                <a href="formulas.html">æ‚¨çš„å®šåˆ¶èŠ³ç–—ä½“éªŒ</a>
                <a href="recipe-database.html" aria-current="page">æ‚¨çš„ç§äººé…æ–¹åº“</a>
                <a href="login.html" id="navLoginLink">ç™»å½•</a>
                <span id="navUserInfo" style="display: none; padding: var(--spacing-sm) var(--spacing-md); color: var(--accent-color); font-weight: 600;"></span>
            </nav>
        </div>
    </div>

    <button class="back-to-top" id="backToTop" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <main id="main-content" class="recipe-db-container" style="margin-top: 80px;">
        <div class="db-header">
            <h1>æ‚¨çš„ç§äººé…æ–¹åº“</h1>
            <p class="subtitle">ç¦»çº¿Â·æœ¬åœ°å­˜å‚¨ Â· æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨ localStorage ä¸­ Â· å¯å¯¼å…¥/å¯¼å‡º JSON</p>
        </div>

        <!-- User Statistics Section (for logged-in users) -->
        <div id="userStatsSection" class="stats-cards" style="display: none; margin-bottom: var(--spacing-xl);">
            <!-- ç»Ÿè®¡å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <!-- Recently Viewed Formulas Section (for logged-in users) -->
        <div id="historySection" class="recipe-list" style="display: none; margin-bottom: var(--spacing-xl);">
            <div class="recipe-list-header">
                <div>
                    <h2>ğŸ•’ æœ€è¿‘æŸ¥çœ‹</h2>
                    <p class="recipe-list-subtitle">æ‚¨æœ€è¿‘æŸ¥çœ‹è¿‡çš„é…æ–¹</p>
                </div>
                <button class="btn btn-secondary" onclick="clearHistory()" id="clearHistoryBtn" style="display: none;">æ¸…ç©ºå†å²</button>
            </div>
            <div id="historyContent">
                <!-- å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- Scenario Suggestions History Section (for logged-in users) -->
        <div id="scenarioHistorySection" class="recipe-list" style="display: none; margin-bottom: var(--spacing-xl);">
            <div class="recipe-list-header">
                <div>
                    <h2>ğŸ“‹ å†å²åœºæ™¯å»ºè®®</h2>
                    <p class="recipe-list-subtitle">æ‚¨ä¹‹å‰ç”Ÿæˆçš„åœºæ™¯å»ºè®®æ–¹æ¡ˆ</p>
                </div>
            </div>
            <div id="scenarioHistoryContent">
                <!-- å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- Inventory Management -->
        <div class="inventory-section">
            <div class="inventory-header">
                <div>
                    <h2>åº“å­˜ç®¡ç†</h2>
                    <p class="inventory-description">å•å‡»å¸¸ç”¨é¡¹ç›®åˆ‡æ¢é€‰æ‹©ï¼ˆæœªé€‰ä¸­åˆ™æ·»åŠ ï¼Œå·²é€‰ä¸­åˆ™åˆ é™¤ï¼‰ï¼›ä¸‹æ‹‰èœå•æˆ–è¾“å…¥æ·»åŠ å…¶ä»–é¡¹ç›®</p>
                </div>
            </div>
            
            <div class="inventory-cards-grid">
                <!-- ç²¾æ²¹åº“å­˜å¡ç‰‡ -->
                <div class="inventory-card">
                    <div class="inventory-card-header">
                        <h3>ç²¾æ²¹</h3>
                    </div>
                    <div class="popular-items-compact">
                        <div class="popular-items-label">å¸¸ç”¨ï¼ˆå•å‡»åˆ‡æ¢é€‰æ‹©ï¼‰</div>
                        <div id="popular-oils" class="popular-items-grid"></div>
                    </div>
                    <div class="custom-add-compact">
                        <select id="oil-select" class="oil-select-compact">
                            <option value="">-- é€‰æ‹©å…¶ä»–ç²¾æ²¹ --</option>
                        </select>
                        <div class="custom-input-group-compact">
                            <input type="text" id="new-oil" placeholder="æˆ–è¾“å…¥åç§°" class="custom-input-compact">
                            <button class="btn btn-primary btn-small" onclick="addInventoryItem('oils')">æ·»åŠ </button>
                        </div>
                    </div>
                </div>
                
                <!-- åŸºç¡€æ²¹åº“å­˜å¡ç‰‡ -->
                <div class="inventory-card">
                    <div class="inventory-card-header">
                        <h3>åŸºç¡€æ²¹</h3>
                    </div>
                    <div class="popular-items-compact">
                        <div class="popular-items-label">å¸¸ç”¨ï¼ˆå•å‡»åˆ‡æ¢é€‰æ‹©ï¼‰</div>
                        <div id="popular-carriers" class="popular-items-grid"></div>
                    </div>
                    <div class="custom-add-compact">
                        <select id="carrier-select" class="oil-select-compact">
                            <option value="">-- é€‰æ‹©å…¶ä»–åŸºç¡€æ²¹ --</option>
                        </select>
                        <div class="custom-input-group-compact">
                            <input type="text" id="new-carrier" placeholder="æˆ–è¾“å…¥åç§°" class="custom-input-compact">
                            <button class="btn btn-primary btn-small" onclick="addInventoryItem('carriers')">æ·»åŠ </button>
                        </div>
                    </div>
                </div>
                
                <!-- æº¶å‰‚åº“å­˜å¡ç‰‡ -->
                <div class="inventory-card">
                    <div class="inventory-card-header">
                        <h3>æº¶å‰‚</h3>
                    </div>
                    <div class="custom-add-compact">
                        <div class="custom-input-group-compact">
                            <input type="text" id="new-solvent" placeholder="è¾“å…¥æº¶å‰‚åç§°" class="custom-input-compact">
                            <button class="btn btn-primary btn-small" onclick="addInventoryItem('solvents')">æ·»åŠ </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- åº“å­˜è¡¨æ ¼ -->
            <div class="inventory-table-section">
                <h3>å½“å‰åº“å­˜</h3>
                <div class="inventory-table-wrapper">
                    <table class="inventory-table">
                        <thead>
                            <tr>
                                <th>ç±»åˆ«</th>
                                <th>é¡¹ç›®åç§°</th>
                                <th>åˆ†ç±»æ ‡ç­¾</th>
                                <th>ä¸»è¦ä½œç”¨</th>
                                <th>ä¿è´¨æœŸ</th>
                                <th>ç”Ÿäº§æ—¥æœŸ</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-table-body">
                            <!-- ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Recipe Editor -->
        <div class="recipe-editor" id="recipe-editor" style="display: none;">
            <div class="recipe-editor-header">
                <h2>ğŸ“ é…æ–¹ç¼–è¾‘å™¨</h2>
                <p class="recipe-editor-subtitle">åˆ›å»ºæˆ–ç¼–è¾‘æ‚¨çš„ç§äººé…æ–¹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯„ä¼°å®‰å…¨æµ“åº¦</p>
            </div>
            <div class="recipe-editor-body">
                <form id="recipe-form" onsubmit="saveRecipe(event)">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div class="form-section">
                        <div class="form-section-header">
                            <div class="form-section-icon">1</div>
                            <div>
                                <h3 class="form-section-title">åŸºæœ¬ä¿¡æ¯</h3>
                                <p class="form-section-description">å¡«å†™é…æ–¹çš„åç§°å’Œç”¨é€”æ ‡ç­¾</p>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>é…æ–¹åç§° <span class="required">*</span></label>
                                <input type="text" id="recipe-name" required placeholder="ä¾‹å¦‚ï¼šåŠ©çœ æ”¾æ¾æ»šç ">
                                <div class="input-hint">ä¸ºæ‚¨çš„é…æ–¹èµ·ä¸€ä¸ªå®¹æ˜“è¯†åˆ«çš„åç§°</div>
                            </div>
                            <div class="form-group">
                                <label>ç”¨é€” / æ ‡ç­¾</label>
                                <input type="text" id="recipe-purpose" placeholder="ä¾‹å¦‚ï¼šåŠ©çœ ï¼›æ”¾æ¾ï¼›ç¼“è§£ç„¦è™‘">
                                <div class="input-hint">ç”¨åˆ†å·åˆ†éš”å¤šä¸ªæ ‡ç­¾ï¼Œä¾¿äºæœç´¢å’Œåˆ†ç±»</div>
                            </div>
                        </div>
                    </div>

                    <!-- é…æ–¹å‚æ•° -->
                    <div class="form-section">
                        <div class="form-section-header">
                            <div class="form-section-icon">2</div>
                            <div>
                                <h3 class="form-section-title">é…æ–¹å‚æ•°</h3>
                                <p class="form-section-description">è®¾ç½®é…æ–¹çš„æ€»é‡å’Œç¨€é‡Šæµ“åº¦</p>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>æ€»é‡ï¼ˆmLï¼‰</label>
                                <input type="number" id="recipe-total" min="0" step="0.1" placeholder="ä¾‹å¦‚ï¼š10">
                                <div class="input-hint">é…æ–¹çš„æ€»å®¹é‡ï¼Œå•ä½ï¼šæ¯«å‡</div>
                            </div>
                            <div class="form-group">
                                <label>ç¨€é‡Šæµ“åº¦ï¼ˆ%ï¼‰</label>
                                <input type="number" id="recipe-dilution" min="0" max="100" step="0.1" placeholder="ä¾‹å¦‚ï¼š2">
                                <div class="input-hint">ç²¾æ²¹åœ¨é…æ–¹ä¸­çš„ç™¾åˆ†æ¯”æµ“åº¦</div>
                            </div>
                        </div>
                    </div>

                    <!-- ç²¾æ²¹æˆåˆ† -->
                    <div class="form-section">
                        <div class="form-section-header">
                            <div class="form-section-icon">3</div>
                            <div>
                                <h3 class="form-section-title">ç²¾æ²¹æˆåˆ†</h3>
                                <p class="form-section-description">æ·»åŠ é…æ–¹ä¸­ä½¿ç”¨çš„ç²¾æ²¹åŠå…¶ç”¨é‡</p>
                            </div>
                        </div>
                        <div class="oil-rows-container">
                            <div id="oil-rows" class="oil-rows-list"></div>
                            <button type="button" class="add-oil-btn" onclick="addOilRow()">
                                <span>ï¼‹</span>
                                <span>æ·»åŠ ç²¾æ²¹</span>
                            </button>
                        </div>
                    </div>

                    <!-- ä»‹è´¨å’ŒåŸºåº• -->
                    <div class="form-section">
                        <div class="form-section-header">
                            <div class="form-section-icon">4</div>
                            <div>
                                <h3 class="form-section-title">ä»‹è´¨å’ŒåŸºåº•</h3>
                                <p class="form-section-description">é€‰æ‹©é…æ–¹çš„ä»‹è´¨ç±»å‹ã€åŸºç¡€æ²¹æˆ–æº¶å‰‚</p>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>ä»‹è´¨ç±»å‹</label>
                                <select id="recipe-medium-type">
                                    <option value="">ï¼ˆè‡ªåŠ¨æ¨æ–­ï¼‰</option>
                                    <option value="base-oil">åŸºç¡€æ²¹ï¼ˆæŒ‰æ‘©æ²¹ã€æ»šç ç­‰ï¼‰</option>
                                    <option value="handcream">æŠ¤æ‰‹éœœ</option>
                                    <option value="bodylotion">èº«ä½“ä¹³</option>
                                    <option value="rosewater">ç«ç‘°æ°´/çº¯éœ²</option>
                                    <option value="alcohol">95%ä¹™é†‡ï¼ˆé¦™æ°´ã€å–·é›¾ç­‰ï¼‰</option>
                                    <option value="footbath">æ³¡è„š/æ³¡æ¾¡</option>
                                    <option value="spray">å–·é›¾</option>
                                    <option value="diffuser">æ‰©é¦™</option>
                                </select>
                                <div class="input-hint">é€‰æ‹©é…æ–¹çš„ä¸»è¦ä»‹è´¨ç±»å‹ï¼Œç”¨äºå®‰å…¨è¯„ä¼°</div>
                            </div>
                            <div class="form-group">
                                <label>åŸºç¡€æ²¹</label>
                                <select id="recipe-carrier">
                                    <option value="">ï¼ˆä¸é€‰ï¼‰</option>
                                </select>
                                <div class="input-hint">é€‰æ‹©ä½¿ç”¨çš„åŸºç¡€æ²¹ï¼ˆå¦‚è·è·å·´æ²¹ã€ç”œæä»æ²¹ç­‰ï¼‰</div>
                            </div>
                            <div class="form-group">
                                <label>æº¶å‰‚</label>
                                <select id="recipe-solvent">
                                    <option value="">ï¼ˆä¸é€‰ï¼‰</option>
                                </select>
                                <div class="input-hint">é€‰æ‹©ä½¿ç”¨çš„æº¶å‰‚ï¼ˆå¦‚ä¹™é†‡ã€çº¯éœ²ç­‰ï¼‰</div>
                            </div>
                        </div>
                    </div>

                    <!-- å¤‡æ³¨ -->
                    <div class="form-section">
                        <div class="form-section-header">
                            <div class="form-section-icon">5</div>
                            <div>
                                <h3 class="form-section-title">å¤‡æ³¨ä¸æ³¨æ„äº‹é¡¹</h3>
                                <p class="form-section-description">è®°å½•é…æ–¹çš„ç‰¹æ®Šè¯´æ˜å’Œå®‰å…¨æç¤º</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>å¤‡æ³¨ / æ³¨æ„äº‹é¡¹</label>
                            <textarea id="recipe-notes" rows="4" placeholder="ä¾‹å¦‚ï¼šå­•æœŸ/å“ºä¹³æœŸ/å„¿ç«¥è°¨æ…ï¼›é¿å…‰ï¼ˆä½›æ‰‹æŸ‘ï¼‰ï¼›å»ºè®®ç¡å‰ä½¿ç”¨ç­‰"></textarea>
                            <div class="input-hint">è®°å½•é…æ–¹çš„ä½¿ç”¨è¯´æ˜ã€ç¦å¿Œäººç¾¤ã€ä¿å­˜æ–¹æ³•ç­‰é‡è¦ä¿¡æ¯</div>
                        </div>
                    </div>

                    <!-- å®‰å…¨è¯„ä¼° -->
                    <div class="form-section">
                        <div class="safety-panel">
                            <div class="safety-panel-header">
                                <div style="flex: 1;">
                                    <div class="safety-panel-label">å®‰å…¨æµ“åº¦è¯„ä¼°</div>
                                    <div id="safety-panel-content" class="safety-panel-content">ï¼ˆè¯·è¾“å…¥æ€»é‡ã€ç¨€é‡Šåº¦ä¸å„æˆåˆ†æ»´æ•°åè‡ªåŠ¨è¯„ä¼°ï¼‰</div>
                                </div>
                                <div id="safety-status" class="safety-badge safety-yellow">æœªè¯„ä¼°</div>
                            </div>
                        </div>
                    </div>

                    <!-- æ“ä½œæŒ‰é’® -->
                    <div class="form-actions">
                        <input type="hidden" id="editing-id">
                        <button type="button" class="btn btn-secondary" onclick="resetEditor()">æ¸…ç©º</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜é…æ–¹</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Recipe List -->
        <div class="recipe-list">
            <div class="recipe-list-header">
                <div>
                    <h2>é…æ–¹åˆ—è¡¨</h2>
                    <p class="recipe-list-subtitle">ç®¡ç†æ‚¨çš„æ‰€æœ‰é…æ–¹ï¼Œæ”¯æŒæœç´¢ã€ç­›é€‰å’Œæ‰¹é‡æ“ä½œ</p>
                    <div class="recipe-count" id="recipe-count">å…± <strong>0</strong> ä¸ªé…æ–¹</div>
                </div>
                <div class="recipe-list-actions">
                    <div class="view-toggle">
                        <button class="view-toggle-btn active" id="view-table" onclick="switchView('table')" title="è¡¨æ ¼è§†å›¾">
                            <span>â˜°</span>
                            <span>è¡¨æ ¼</span>
                        </button>
                        <button class="view-toggle-btn" id="view-cards" onclick="switchView('cards')" title="å¡ç‰‡è§†å›¾">
                            <span>âŠ</span>
                            <span>å¡ç‰‡</span>
                        </button>
                    </div>
                    <button class="btn btn-primary" onclick="showNewRecipeForm()">ï¼‹ æ–°å»ºé…æ–¹</button>
                    <button class="btn btn-secondary" onclick="window.print()">æ‰“å°/ä¿å­˜PDF</button>
                    <button class="btn btn-secondary" onclick="exportDatabase()">å¯¼å‡º JSON</button>
                    <label class="btn btn-secondary" style="cursor: pointer;">
                        <input type="file" id="importFile" accept="application/json" style="display: none;" onchange="importDatabase(event)">
                        å¯¼å…¥ JSON
                    </label>
                    <button class="btn btn-danger" onclick="clearDatabase()" title="æ¸…ç©ºæ•°æ®åº“">æ¸…ç©º</button>
                </div>
            </div>
            <div class="search-filter-container">
                <input type="text" id="search-query" class="search-input" placeholder="æŒ‰åç§°/ç”¨é€”/å¤‡æ³¨æœç´¢â€¦" oninput="renderRecipeTable()" aria-label="æœç´¢é…æ–¹">
            </div>
            <div class="filter-container">
                <label for="filter-oil">åŒ…å«ç²¾æ²¹ï¼š</label>
                <select id="filter-oil" onchange="renderRecipeTable()">
                    <option value="">â€” ä»»æ„ â€”</option>
                </select>
            </div>
            <div class="recipe-table-wrapper" id="recipe-table-wrapper">
                <table class="recipe-table">
                    <thead>
                        <tr>
                            <th>åç§°</th>
                            <th>æˆåˆ†</th>
                            <th>æµ“åº¦</th>
                            <th>å®¹é‡</th>
                            <th>åŸºç¡€æ²¹/æº¶å‰‚</th>
                            <th>ç”¨é€”/å¤‡æ³¨</th>
                            <th>å®‰å…¨</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="recipe-table-body"></tbody>
                </table>
            </div>
            <div class="recipe-cards-view" id="recipe-cards-view"></div>
        </div>
    </main>

    <script src="common.js"></script>
    <script src="auth.js"></script>
    <script src="auth-nav.js"></script>
    <script src="questionnaire.js"></script>
    <script src="oil-database.js"></script>
    <script src="recipe-db.js"></script>
    <script src="unified-data-manager.js"></script>
    <script src="safety-evaluator.js"></script>
    <script src="preset-recipes.js"></script>
    <script src="recipe-database.js"></script>
</body>
</html>



